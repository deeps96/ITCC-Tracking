<div class="white">
  <a materialize="tooltip" [routerLink]="['']" class="tooltipped" data-delay="50" data-tooltip="Return to home" data-position="right">
    <i class="material-icons medium left light-blue-text text-lighten-3">chevron_left</i>
  </a>
  <h3 *ngIf="parcel" class="center-align blue-grey-text">Tracking {{parcel.trackingNumber}}</h3>
</div>
<ngui-map #map [options]="mapOptions" (mapReady$)="onMapReady($event)">
    <custom-marker *ngFor="let address of addresses; let iAddress = index"
            [position]="address"
            (initialized$)="onMarkerInit($event);">
      <div class="counterMarker" [ngClass]="{'pulse': iAddress == addresses.length - 1}">{{iAddress + 1}}</div>
    </custom-marker>
    <polyline [editable]="false"
            [path]="positions"
            [geodesic]="true"
            [strokeColor]="'#b0bec5'"
            [strokeOpacity]="1"
            [strokeWeight]="2"></polyline>
</ngui-map>
<div id="background" class="blue-grey lighten-5" *ngIf="parcel">
  <div class="container">
    <div class="row">
      <div class="col s12">
        <h3 class="blue-grey-text center-align">History</h3>
      </div>
    </div>
    <div class="row">
      <vertical-timeline>
        <vertical-timeline-card *ngFor="let station of parcel.stations" [dateValue]="station.timestamp">
          <div class="row">
            <div class="col s12">
              <h2>{{parseActionDescription(station)}}</h2>
            </div>
          </div>
        </vertical-timeline-card>
      </vertical-timeline>
    </div>
    <div class="row">
      <div class="col s12">
        <h3 class="blue-grey-text center-align">Details</h3>
      </div>
    </div>
    <div class="row">
      <div class="col s8 offset-s2">
        <div class="card-panel blue-grey lighten-4">
          <div class="row no-margin">
            <div class="col s2 bold-text">Type</div>
            <div class="col s10">{{parcel.parcelTypeName}}</div>
          </div>
          <div class="row no-margin">
            <div class="col s6">
              <div class="row no-margin">
                <div class="col s4 bold-text" style="padding-left: 0;">From</div>
                <div class="col s8">
                  {{parcel.departurePersonDetails}}<br />
                  {{parcel.departure.road}}<br />
                  {{parcel.departure.city.name + ' ' + parcel.departure.city.zipCode}}<br />
                  {{parcel.departure.country}}
                </div>
              </div>
            </div>
            <div class="col s6">
              <div class="row no-margin">
                <div class="col s4 bold-text">To</div>
                <div class="col s8">
                  {{parcel.destinationPersonDetails}}<br />
                  {{parcel.destination.road}}<br />
                  {{parcel.destination.city.name + ' ' + parcel.destination.city.zipCode}}<br />
                  {{parcel.destination.country}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
